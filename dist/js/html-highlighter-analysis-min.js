var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.highlighter=t()}(this,function(){return{htmlEncode:function(e){var t="";return 0===e.length?"":(t=e.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"))},htmlDecode:function(e){var t="";return 0===e.length?"":(t=e.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'))},lexer:function(e){function t(){var t=e.substr(u.lastIndex).search(/&lt;!doctype|&lt;!--|&lt;\/?/i);t!==-1&&(u.lastIndex=u.lastIndex+t)}function n(){var t=e.substr(u.lastIndex).search(/--&gt;/i);t!==-1&&(u.lastIndex=u.lastIndex+t)}function l(){var t=e.substr(u.lastIndex).search(/&gt;/i);t!==-1&&(u.lastIndex=u.lastIndex+t)}for(var u=/(&lt;!doctype)|(&lt;!--|--&gt;|&lt;\/?|\/?&gt;|=)|([\:\@\#]+|[\w][\w\-\:\@]*|[\u4E00-\u9FA5\-\:]+)|(&quot;[\s\S]*?&quot;|&#39;[\s\S]*?&#39;)|(\s+)/gi,i=[],s=function(e,u,i){return/^(--&gt;|\/?&gt;)$/i.test(u)?t():/^&lt;!--$/i.test(u)?n():/^(&lt;!doctype)$/i.test(u)&&l(),{type:e,value:u,index:i}},a=void 0;null!=(a=u.exec(e));)void 0!=a[1]?i.push(s("punct",a[1],a.index)):void 0!=a[2]?i.push(s("punct",a[2],a.index)):void 0!=a[3]?i.push(s("word",a[3],a.index)):void 0!=a[4]?i.push(s("literal",a[4],a.index)):void 0!=a[5]&&i.push(s("space",a[5],a.index));return i},preParser:function(e){function t(e,t,n,l){return{index:e,length:l||t.length,type:n,value:t||""}}function n(e,t){for(var n=null;l.length>0;){var u=l.shift();if(u.value===e&&u.type===t){n=u;break}}return n}for(var l=this.lexer(e),u=[],i=null,s=null;l.length>0;){var a=l.shift();if("punct"===a.type)if(/&lt;!doctype/i.test(a.value)){u.push(t(a.index,"&lt;!","punct"));var r=n("&gt;","punct");r?(u.push(t(r.index,r.value,"punct")),i=null):i="&lt;!"}else if(/&lt;!--/i.test(a.value)){var p=n("--&gt;","punct");p?(u.push(t(a.index,"","comment",p.index-a.index+p.value.length)),i=null):u.push(t(a.index,"","comment",-1))}else/&lt;\/?/i.test(a.value)?i||s||(u.push(t(a.index,a.value,"punct")),i=a.value,s=null):/\/?&gt;/i.test(a.value)?"&lt;"===i?(u.push(t(a.index,a.value,"punct")),i=null,s=null):"&lt;/"===i&&"&gt;"===a.value?(u.push(t(a.index,a.value,"punct")),i=null,s=null):"&lt;/"===i&&"/&gt;"===a.value&&(u.push(t(a.index+1,"&gt;","punct")),i=null,s=null):/=/i.test(a.value)&&i&&u.push(t(a.index,a.value.substr(0,1),"attr-eq"));else if("word"===a.type)i&&/^&lt;\/?$/i.test(u.slice(-1)[0].value)?(u.push(t(a.index,a.value,"tag")),s=a.value):i&&"space"===u.slice(-1)[0].type?u.push(t(a.index,a.value,"attr")):i&&/^[\:\@]$/i.test(u.slice(-1)[0].value)?(u.slice(-1)[0].type="value",u.push(t(a.index,a.value,"attr"))):i&&"="===u.slice(-1)[0].value&&u.push(t(a.index,a.value,"value"));else if("literal"===a.type){if(i){var o=a.value.search(/^&#39;/i)!=-1?"&#39;".length:"&quot;".length;u.push(t(a.index,a.value.substr(0,o),"attr-punct"));var c=a.value.length-o-o;u.push(t(a.index+o,a.value.substr(o,c),"value")),u.push(t(a.index+o+c,a.value.substr(a.value.length-o,o),"attr-punct"))}}else"space"===a.type&&(i&&s?u.push(t(a.index,a.value,"space")):i&&!s&&(u.pop(),i=null))}return u},highlightCode:function(e){for(var t=this.preParser(e),n=function(n){var l=t[n];if("space"===l.type)return"continue";var u=e.substr(l.index,l.length).split(/\r\n|\n/).map(function(e){return e.replace(/^(\s*)(.*?)(\s*)$/,'$1<span class="html '+l.type+'">$2</span>$3')}).join("\n");e=e.substr(0,l.index).concat('<span class="html '+l.type+'">'+u+"</span>",e.substr(l.index+l.length))},l=t.length-1;l>=0;l--){n(l)}return e=e.split(/\r\n|\n/i).map(function(e){var t=e.match(/^\s*/i)[0].length;return'<li style="padding-left: '+.5*t+"em;text-indent: -"+.5*t+'em;">'+e+"</li>"}).join(""),e='<ol class="highlighter-ol">'+e+"</ol>"},highlight:function(e){return this.highlightCode(this.htmlEncode(e))}}});